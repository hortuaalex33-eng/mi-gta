<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>MI GTA PRO</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  overflow: hidden;
  background: #111;
}

/* Canvas */
canvas {
  display: block;
}

/* JOYSTICK PRO */
#joystickBase {
  position: absolute;
  bottom: 40px;
  left: 40px;
  width: 140px;
  height: 140px;
  background: rgba(255,255,255,0.1);
  border-radius: 50%;
}

#joystick {
  position: absolute;
  width: 70px;
  height: 70px;
  background: rgba(0,255,255,0.7);
  border-radius: 50%;
  left: 35px;
  top: 35px;
}

/* BOTÃ“N CAMBIAR MODO */
#modoBtn {
  position: absolute;
  top: 20px;
  right: 20px;
  padding: 15px;
  background: red;
  color: white;
  font-weight: bold;
  border-radius: 10px;
}
</style>
</head>

<body>

<div id="joystickBase">
  <div id="joystick"></div>
</div>

<div id="modoBtn">Modo GTA</div>

<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// PLAYER
let player = {
  x: 200,
  y: 200,
  size: 30,
  speed: 3
};

// NPCS
let npcs = [];
for (let i = 0; i < 5; i++) {
  npcs.push({
    x: Math.random() * canvas.width,
    y: Math.random() * canvas.height,
    size: 25
  });
}

// JOYSTICK
let joystick = document.getElementById("joystick");
let base = document.getElementById("joystickBase");

let dragging = false;
let inputX = 0;
let inputY = 0;

base.addEventListener("touchstart", (e) => {
  dragging = true;
});

base.addEventListener("touchmove", (e) => {
  if (!dragging) return;

  let touch = e.touches[0];
  let rect = base.getBoundingClientRect();

  let x = touch.clientX - rect.left - 70;
  let y = touch.clientY - rect.top - 70;

  let dist = Math.sqrt(x*x + y*y);
  let max =
